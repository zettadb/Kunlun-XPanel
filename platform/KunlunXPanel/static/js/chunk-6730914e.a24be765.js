(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6730914e"],{"07aa":function(t,e,r){},"0c10":function(t,e,r){"use strict";r("07aa")},"0ccb":function(t,e,r){var n=r("50c4"),o=r("1148"),a=r("1d80"),s=Math.ceil,u=function(t){return function(e,r,u){var i,c,l=String(a(e)),d=l.length,f=void 0===u?" ":String(u),p=n(r);return p<=d||""==f?l:(i=p-d,c=o.call(f,s(i/f.length)),c.length>i&&(c=c.slice(0,i)),t?l+c:c+l)}};t.exports={start:u(!1),end:u(!0)}},1148:function(t,e,r){"use strict";var n=r("a691"),o=r("1d80");t.exports="".repeat||function(t){var e=String(o(this)),r="",a=n(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(r+=e);return r}},2017:function(t,e,r){"use strict";r("cafe")},"336c":function(t,e,r){"use strict";r("9f6c")},"4d90":function(t,e,r){"use strict";var n=r("23e7"),o=r("0ccb").start,a=r("9a0c");n({target:"String",proto:!0,forced:a},{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"53ca":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}},"9a0c":function(t,e,r){var n=r("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},"9ed6":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login-container"},[r("Loginheader"),r("div",{staticClass:"login-bg"}),r("div",{staticClass:"login-body"},[r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules,"auto-complete":"on","label-position":"left"}},[r("div",{staticClass:"title-container"},[r("h3",{staticClass:"title"},[t._v("统一管理用户登录")])]),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{ref:"username",attrs:{placeholder:"请输入账户",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{key:t.passwordType,ref:"password",attrs:{type:t.passwordType,placeholder:"请输入密码",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}}),r("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===t.passwordType?"eye":"eye-open"}})],1)],1),r("el-form-item",{attrs:{prop:"meta"}},[r("el-select",{attrs:{placeholder:"请选择元数据"},model:{value:t.loginForm.meta,callback:function(e){t.$set(t.loginForm,"meta",e)},expression:"loginForm.meta"}},t._l(t.options,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})})),1),r("i",{staticClass:"el-icon-plus",staticStyle:{"margin-left":"15px","font-size":"20px"}})],1),r("div",{staticClass:"oh change_password_wrap"},[r("el-checkbox",{staticClass:"remember",model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("记住密码")]),r("router-link",{staticClass:"change_password",attrs:{to:{path:"/alteration"}}},[t._v("忘记密码")])],1),r("el-button",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v("登录")])],1)],1),t._m(0)],1)},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"footer"},[r("p",[r("span",[t._v("© 2022 zettadb.com版权所有")]),r("span",[t._v("泽拓科技（深圳）有限责任公司")])])])}],a=r("1da1"),s=(r("96cf"),r("ac1f"),r("00b4"),r("1276"),r("e9c4"),r("abfb")),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"oh login-header"},[r("p",{staticClass:"header fl"},[t._v(t._s(t.company)+"-XPanel管理系统")])])},i=[],c={name:"Loginheader",data:function(){return{company:""}},created:function(){this.company="泽拓科技"}},l=c,d=(r("0c10"),r("2877")),f=Object(d["a"])(l,u,i,!1,null,null,null),p=f.exports,m=r("ed08"),g=r("a665"),h=r("578a"),b={name:"Login",components:{Loginheader:p},data:function(){var t=function(t,e,r){e?/^[A-Za-z0-9_]+$/.test(e)?r():r(new Error("用户名只能输入英文字母、数字、下划线")):r(new Error("请输入用户名"))},e=function(t,e,r){e.length<8?r(new Error("密码不少于8位")):r()},r=function(t,e,r){e?r():r(new Error("请选择元数据"))};return{loginForm:{username:"",password:"",meta:""},loginRules:{username:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:e}],meta:[{required:!0,trigger:"blur",validator:r}]},loading:!1,passwordType:"password",redirect:void 0,checked:!0,randCodeImage:"",requestCodeSuccess:!1,verifiedCode:"",options:[],meta:""}},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},methods:{getMetaList:function(){var t=this,e={job_type:"get_meta_summary"};e.version=h["m"][0].ver,e.job_id="",e.timestamp=h["k"][0].time+"",e.paras={},Object(g["p"])(e).then((function(e){var r=e.attachment.list_meta;if(r.length>0)for(var n=0;n<r.length;n++)if("true"==r[n].master){var o={value:n+1,label:r[n].hostaddr+"("+r[n].port+")"};t.options.push(o)}}))},showPwd:function(){var t=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){t.$refs.password.focus()}))},handleLogin:function(){var t=this;this.checked?(sessionStorage.setItem("login_username",this.loginForm.username),sessionStorage.setItem("login_password",this.loginForm.password)):(sessionStorage.setItem("login_username",""),sessionStorage.setItem("login_password","")),this.$refs.loginForm.validate(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r){var n,o,a,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}return n=t.loginForm.meta.substring(0,t.loginForm.meta.length-1).split("("),o={ip:n[0],port:n[1]},e.next=5,Object(s["a"])(o);case 5:return e.sent,t.loading=!0,a={username:t.loginForm.username,password:t.loginForm.password},e.next=10,Object(s["c"])(a);case 10:u=e.sent,200==u.code?t.goto(u):(Object(m["e"])(u.message,"error"),t.loading=!1),e.next=16;break;case 14:return console.log("error submit!!"),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},goto:function(t){if(this.loading=!1,console.log(t),t.Token){sessionStorage.setItem("zettadb_vue_token",t.Token),sessionStorage.setItem("zettadb_vue_name",t.userName);var e=t.num;1==e?(sessionStorage.setItem("apply_all_cluster",t.apply_all_cluster),sessionStorage.setItem("affected_clusters",t.affected_clusters),sessionStorage.setItem("priv",JSON.stringify(t.priv)),this.$router.push({path:"/dashboard"})):this.$router.push({path:"/alteration"})}else Object(m["e"])("登录接口没有返回token","error")}},created:function(){this.checked?(this.loginForm.username=sessionStorage.getItem("login_username"),this.loginForm.password=sessionStorage.getItem("login_password")):(this.loginForm.username="",this.loginForm.password=""),this.getMetaList()}},v=b,w=(r("2017"),r("336c"),Object(d["a"])(v,n,o,!1,null,null,null));e["default"]=w.exports},"9f6c":function(t,e,r){},a665:function(t,e,r){"use strict";r.d(e,"l",(function(){return o})),r.d(e,"f",(function(){return a})),r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return i})),r.d(e,"o",(function(){return c})),r.d(e,"g",(function(){return l})),r.d(e,"e",(function(){return d})),r.d(e,"v",(function(){return f})),r.d(e,"s",(function(){return p})),r.d(e,"r",(function(){return m})),r.d(e,"i",(function(){return g})),r.d(e,"h",(function(){return h})),r.d(e,"j",(function(){return b})),r.d(e,"w",(function(){return v})),r.d(e,"x",(function(){return w})),r.d(e,"y",(function(){return y})),r.d(e,"z",(function(){return C})),r.d(e,"t",(function(){return O})),r.d(e,"u",(function(){return S})),r.d(e,"m",(function(){return _})),r.d(e,"q",(function(){return j})),r.d(e,"d",(function(){return k})),r.d(e,"B",(function(){return F})),r.d(e,"k",(function(){return x})),r.d(e,"p",(function(){return I})),r.d(e,"n",(function(){return D})),r.d(e,"A",(function(){return $}));var n=r("c2b2");function o(t){return Object(n["a"])({url:"/user/allMachineStatus",method:"post",data:t})}function a(t){return Object(n["a"])({url:"/user/Cluster/createCluster",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/user/Cluster/addShards",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/user/Cluster/addComps",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/user/Cluster/addNodes",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/user/Cluster/getStatus",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/user/Cluster/delCluster",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/user/Cluster/backUpCluster",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/user/Cluster/restoreCluster",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/user/Cluster/postgresEnable",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/user/Cluster/mysqlEnable",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/user/Cluster/delShard",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/user/Cluster/delComp",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/user/Cluster/delSnode",method:"post",data:t})}function v(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function w(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function y(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function C(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function O(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function S(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/user/Cluster/getBackUpStorage",method:"post",data:t})}function j(t){return Object(n["a"])({url:"/user/Cluster/getStorageList",method:"post",data:t})}function k(t){return Object(n["a"])({url:"/user/Cluster/addStorage",method:"post",data:t})}function F(t){return Object(n["a"])({url:"/user/Cluster/updateStorage",method:"post",data:t})}function x(t){return Object(n["a"])({url:"/user/Cluster/delStorage",method:"post",data:t})}function I(t){return Object(n["a"])({url:"/Meta/getMetaPrimary",method:"POST",data:t})}function D(t){return Object(n["a"])({url:"/Meta/getClusterDetail",method:"post",data:t})}function $(t){return Object(n["a"])({url:"/Meta/switchShard",method:"post",data:t})}},c2b2:function(t,e,r){"use strict";r("d3b7");var n=r("bc3a"),o=r.n(n),a=r("5c96"),s=(r("4360"),r("5f87"),JSON.parse(sessionStorage.getItem("response")).API_URL),u=o.a.create({baseURL:s+"/HttpService/Emit",timeout:6e4});u.interceptors.request.use((function(t){sessionStorage.getItem("zettadb_vue_token");return t}),(function(t){return console.log(t),Promise.reject(t)})),u.interceptors.response.use((function(t){var e=t.data;return e.code+="",e}),(function(t){return Object(a["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=u},cafe:function(t,e,r){},e9c4:function(t,e,r){var n=r("23e7"),o=r("d066"),a=r("d039"),s=o("JSON","stringify"),u=/[\uD800-\uDFFF]/g,i=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,l=function(t,e,r){var n=r.charAt(e-1),o=r.charAt(e+1);return i.test(t)&&!c.test(o)||c.test(t)&&!i.test(n)?"\\u"+t.charCodeAt(0).toString(16):t},d=a((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&n({target:"JSON",stat:!0,forced:d},{stringify:function(t,e,r){var n=s.apply(null,arguments);return"string"==typeof n?n.replace(u,l):n}})},ed08:function(t,e,r){"use strict";r.d(e,"e",(function(){return o})),r.d(e,"d",(function(){return a})),r.d(e,"a",(function(){return s})),r.d(e,"c",(function(){return u})),r.d(e,"b",(function(){return i}));r("53ca"),r("ac1f"),r("00b4"),r("5319"),r("4d63"),r("2c3e"),r("25f0"),r("d3b7"),r("4d90"),r("1276"),r("159b");var n=r("5c96");function o(t,e){return Object(n["Message"])({message:t,type:e,duration:2e3})}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"确定执行此操作吗？",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";return n["MessageBox"].confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:e,center:!0})}function s(t){var e=t.split("T");return e[0]+" "+e[1]}function u(){var t=new Date,e="-",r=":",n=t.getFullYear(),o=t.getMonth()+1,a=t.getDate(),s=t.getHours(),u=t.getMinutes(),i=t.getSeconds(),c=["星期一","星期二","星期三","星期四","星期五","星期六","星期天"];c[t.getDay()];o>=1&&o<=9&&(o="0"+o),a>=0&&a<=9&&(a="0"+a),s>=0&&s<=9&&(s="0"+s),u>=0&&u<=9&&(u="0"+u),i>=0&&i<=9&&(i="0"+i);var l=n+e+o+e+a+" "+s+r+u+r+i;return l}function i(t){var e=t.split("-"),r=e[0],n=e[1],o=e[2],a=new Date(r,n,0);a=a.getDate();var s=r,u=parseInt(n)+1;13==u&&(s=parseInt(s)+1,u=1);var i=o,c=new Date(s,u,0);c=c.getDate(),i>c&&(i=c),u<10&&(u="0"+u);var l=s+"-"+u+"-"+i;return l}}}]);