(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df7eea16"],{7590:function(e,t,o){e.exports=o.p+"static/img/compnode.e70f5e28.png"},a148:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticStyle:{"padding-top":"6px","padding-left":"30px","padding-right":"30px","border-bottom":"#efefef solid 1px",width:"200px"}},[o("el-input",{attrs:{disabled:""},model:{value:this.hostaddr,callback:function(t){e.$set(this,"hostaddr",t)},expression:"this.hostaddr"}})],1),o("div",{ref:"myPage",staticStyle:{height:"calc(100vh - 150px)"}},[o("SeeksRelationGraph",{ref:"seeksRelationGraph",attrs:{options:e.graphOptions,"on-node-click":e.onNodeClick,"on-line-click":e.onLineClick},scopedSlots:e._u([{key:"node",fn:function(t){var n=t.node;return o("div",{on:{mouseover:function(t){return e.showNodeTips(n,t)},mouseout:function(t){return e.hideNodeTips(n,t)}}},[o("div",[o("i",{class:n.data.icon,style:{color:n.data.color,fontSize:"40px"}}),o("p",{domProps:{textContent:e._s(n.text)}})])])}}])})],1),e.isShowNodeTipsPanel?o("div",{staticStyle:{"z-index":"999",padding:"10px","background-color":"#ffffff",border:"#eeeeee solid 1px","box-shadow":"0px 0px 8px #cccccc",position:"absolute"},style:{left:e.nodeMenuPanelPosition.x+"px",top:e.nodeMenuPanelPosition.y+"px"}},[o("div",{staticClass:"c-node-menu-item"},[e._v("ip:"+e._s(e.currentNode.data.ip))]),o("div",{staticClass:"c-node-menu-item"},[e._v("port:"+e._s(e.currentNode.text))]),e.shardName?o("div",{staticClass:"c-node-menu-item"},[e._v("shard名称:"+e._s(e.currentNode.data.shard_name))]):e._e(),o("div",{staticClass:"c-node-menu-item"},[e._v("集群名称:"+e._s(e.currentNode.data.cluster_name))])]):e._e()])},i=[],a=o("0491"),s=o.n(a),d=o("a467"),r={name:"Node",components:{SeeksRelationGraph:s.a},data:function(){return{compnode:o("7590"),comps:o("7590"),isShowNodeTipsPanel:!1,nodeMenuPanelPosition:{x:0,y:0},shardName:!1,currentCase:"横向树状图谱",isShowCodePanel:!1,graphOptions:{backgrounImageNoRepeat:!0,layouts:[{label:"中心",layoutName:"tree",layoutClassName:"seeks-layout-center",defaultNodeShape:0,min_per_width:40,max_per_width:70,min_per_height:180}],defaultLineMarker:{markerWidth:10,markerHeight:10,refX:6,refY:6,data:"M2,2 L10,6 L2,10 L6,6 L2,2"},defaultNodeShape:1,defaultLineShape:4,defaultJunctionPoint:"tb",defaultNodeBorderWidth:0,defaultLineColor:"rgba(149, 195, 243, 1)",defaultNodeColor:"rgba(255, 255, 255, 1)",defaultNodeFontColor:"rgba(0, 0, 0, 1)",defaultNodeBorderColor:"rgba(255, 255, 255, 1)"},hostaddr:"",list:[]}},created:function(){this.getParams()},mounted:function(){this.showSeeksGraph()},methods:{showNodeTips:function(e,t){this.currentNode=e;var o=this.$refs.myPage.getBoundingClientRect();"ip"==this.currentNode.id||"storage"==this.currentNode.id||"comps"==this.currentNode.id?this.isShowNodeTipsPanel=!1:(-1!=this.currentNode.id.indexOf("snode")?this.shardName=!0:this.shardName=!1,this.isShowNodeTipsPanel=!0,this.nodeMenuPanelPosition.x=t.clientX-o.x+10,this.nodeMenuPanelPosition.y=t.clientY-o.y+10)},hideNodeTips:function(e,t){this.isShowNodeTipsPanel=!1},showNodeMenus:function(e,t){this.currentNode=e;var o=this.$refs.myPage.getBoundingClientRect();this.isShowNodeMenuPanel=!0,this.nodeMenuPanelPosition.x=t.clientX-o.x,this.nodeMenuPanelPosition.y=t.clientY-o.y},getParams:function(){this.hostaddr=this.$route.query.hostaddr},showSeeksGraph:function(e){var t=this;Object(d["b"])(this.hostaddr).then((function(e){for(var o=e.list,n=0;n<o.nodes.length;n++){var i=o.nodes[n];"ip"==i.id&&t.$set(i,"data",{icon:"iconfont  icon-computer",color:"#533ade"}),"comps"==i.id&&t.$set(i,"data",{icon:"iconfont icon-comps",color:"#1196db"}),"storage"==i.id&&t.$set(i,"data",{icon:"iconfont icon-storage",color:"#e98f36"}),-1!=i.id.indexOf("cnode")&&(t.$set(i.data,"icon","iconfont icon-compnode"),t.$set(i.data,"color","#1196db")),-1!=i.id.indexOf("snode")&&(t.$set(i.data,"icon","iconfont icon-snode"),t.$set(i.data,"color","#e98f36"))}t.list=o;var a=t.list;t.$refs.seeksRelationGraph.setJsonData(a,(function(e){})),setTimeout((function(){t.listLoading=!1}),500)}))},onNodeClick:function(e,t){console.log("onNodeClick:",e)},onLineClick:function(e,t){console.log("onLineClick:",e)}}},c=r,u=(o("fee5"),o("2877")),l=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=l.exports},a467:function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return a})),o.d(t,"d",(function(){return s})),o.d(t,"c",(function(){return d})),o.d(t,"e",(function(){return r}));var n=o("b775");function i(e){return Object(n["a"])({url:"/user/Machine/getMachineList",method:"get",params:e})}function a(e){return Object(n["a"])({url:"/user/Machine/getMachineNodesList",method:"post",data:{ip:e}})}function s(e){return Object(n["a"])({url:"/user/Machine/getNodeCount",method:"post",data:{ip:e}})}function d(e){return Object(n["a"])({url:"/user/Machine/getNodeList",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/user/Machine/getUsedList",method:"post",data:e})}},facb:function(e,t,o){},fee5:function(e,t,o){"use strict";o("facb")}}]);