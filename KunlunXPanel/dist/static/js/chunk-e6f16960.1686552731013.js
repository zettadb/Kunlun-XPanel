(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6f16960"],{1607:function(e,t,a){(function(t,a){var l=t.argv.indexOf("-p")>=0;e.exports={entry:{bmap:a+"/../extension/bmap/bmap.js",dataTool:a+"/../extension/dataTool"},output:{libraryTarget:"umd",library:["echarts","[name]"],path:a+"/../dist/extension",filename:l?"[name].min.js":"[name].js"},externals:{echarts:"echarts"}}}).call(this,a("4362"),"/")},a15b:function(e,t,a){"use strict";var l=a("23e7"),i=a("44ad"),s=a("fc6a"),r=a("a640"),n=[].join,o=i!=Object,p=r("join",",");l({target:"Array",proto:!0,forced:o||!p},{join:function(e){return n.call(s(this),void 0===e?",":e)}})},e9c4:function(e,t,a){var l=a("23e7"),i=a("d066"),s=a("d039"),r=i("JSON","stringify"),n=/[\uD800-\uDFFF]/g,o=/^[\uD800-\uDBFF]$/,p=/^[\uDC00-\uDFFF]$/,u=function(e,t,a){var l=a.charAt(t-1),i=a.charAt(t+1);return o.test(e)&&!p.test(i)||p.test(e)&&!o.test(l)?"\\u"+e.charCodeAt(0).toString(16):e},m=s((function(){return'"\\udf06\\ud834"'!==r("\udf06\ud834")||'"\\udead"'!==r("\udead")}));r&&l({target:"JSON",stat:!0,forced:m},{stringify:function(e,t,a){var l=r.apply(null,arguments);return"string"==typeof l?l.replace(n,u):l}})},fe84:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("div",{staticClass:"table-list-search-wrap"},[a("el-input",{staticClass:"list_search_keyword",attrs:{placeholder:"可输入目标名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),a("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" 查询")]),a("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:e.handleClear}},[e._v(" 重置")]),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("新增 ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.installStatus,expression:"installStatus === true"}],staticClass:"info",domProps:{textContent:e._s(e.info)}})],1),a("div",{staticClass:"table-list-wrap"})]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.list,border:"","highlight-current-row":""}},[e._v(" > "),a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"worker_param",align:"center",label:"参数"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.showParam(l)}}},[e._v("配置详情")])]}}])}),a("el-table-column",{attrs:{prop:"status",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[1===l.status?a("el-tag",[e._v("服务中")]):a("el-tag",{attrs:{type:"danger"}},[e._v("无效")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"300","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row,i=t.$index;return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(l,i)}}},[e._v("删除 ")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listQuery.pageNo,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNo",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:"新增CDC服务","close-on-click-modal":!1,visible:e.dialogFormVisible,"custom-class":"single_dal_view"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"140px"}},[a("el-form-item",{attrs:{label:"目标表集群:",prop:"cluster_name"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择目标表集群"},on:{change:function(t){return e.handleChangeCluster(t)}},model:{value:e.temp.cluster_name,callback:function(t){e.$set(e.temp,"cluster_name",t)},expression:"temp.cluster_name"}},e._l(e.clusterOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"元数据:",prop:"meta_db"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择目标表集群",multiple:""},model:{value:e.temp.meta_db,callback:function(t){e.$set(e.temp,"meta_db",t)},expression:"temp.meta_db"}},e._l(e.MetaClusterList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.hostaddr+":"+e.port,value:e.hostaddr+":"+e.port}})})),1)],1),a("el-form-item",{attrs:{label:"元数据账号:",prop:"meta_user"}},[a("el-input",{attrs:{clearable:"",placeholder:"元数据账号"},model:{value:e.temp.meta_user,callback:function(t){e.$set(e.temp,"meta_user",t)},expression:"temp.meta_user"}})],1),a("el-form-item",{attrs:{label:"元数据密码:",prop:"meta_passwd"}},[a("el-input",{attrs:{clearable:"",placeholder:"元数据密码"},model:{value:e.temp.meta_passwd,callback:function(t){e.$set(e.temp,"meta_passwd",t)},expression:"temp.meta_passwd"}})],1),a("el-form-item",{attrs:{label:"数据表:",prop:"dump_tables"}},[a("el-cascader",{ref:"tableOptions",attrs:{clearable:"",placeholder:"请选择 库名/模式/表",options:e.srcTableOptions,filterable:"",props:e.props},on:{change:e.handleTableChange},model:{value:e.temp.dump_tables,callback:function(t){e.$set(e.temp,"dump_tables",t)},expression:"temp.dump_tables"}})],1),a("el-form-item",{attrs:{label:"shard 参数:",prop:"shard_params"}},[e.temp.shard_params.length>0?a("el-table",{attrs:{data:e.temp.shard_params,border:"",size:"mini"}},[a("el-table-column",{attrs:{prop:"shard_id",label:"shard_id"}}),a("el-table-column",{attrs:{prop:"dump_hostaddr",label:"dump_hostaddr"}}),a("el-table-column",{attrs:{prop:"dump_port",label:"dump_port"}}),a("el-table-column",{attrs:{prop:"binlog_file",label:"binlog_file"}}),a("el-table-column",{attrs:{prop:"binlog_pos",label:"binlog_pos"}}),a("el-table-column",{attrs:{prop:"gtid_set",label:"gtid_set"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{closable:"",size:"mini",type:"danger"},on:{close:function(a){return e.deleteShardParams(t.$index,t.row)}}},[e._v(" 删除 ")])]}}],null,!1,4093835979)})],1):e._e(),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.ShardParamSvisible=!0}}},[e._v("添加"),a("i",{staticClass:"el-icon-plus el-icon--right"})])],1),a("el-form-item",{attrs:{label:"输出参数:",prop:"output_plugins"}},[e.temp.output_plugins.length>0?a("el-table",{attrs:{data:e.temp.output_plugins,border:"",size:"mini"}},[a("el-table-column",{attrs:{width:"100px",prop:"plugin_name",label:"plugin name"}}),a("el-table-column",{attrs:{width:"350px",prop:"plugin_param",label:"plugin param"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return["event_file"===l.plugin_name?a("span",[e._v(e._s(l.plugin_param))]):a("span",[e._v(e._s(JSON.stringify(l.plugin_param)))])]}}],null,!1,173159923)}),a("el-table-column",{attrs:{width:"100px",prop:"udf_name",label:"udf name"}}),a("el-table-column",{attrs:{width:"100px",label:"操作",align:"center",type:"index",index:e.indexMethod},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{closable:"",size:"mini",type:"danger"},on:{close:function(a){return e.deleteOutputParams(t.$index,t.row)}}},[e._v(" 删除 ")])]}}],null,!1,118437592)})],1):e._e(),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.outputparamsvisible=!0}}},[e._v(" 添加"),a("i",{staticClass:"el-icon-plus el-icon--right"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.dialogDetail,expression:"!dialogDetail"}],on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关闭")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.dialogDetail,expression:"!dialogDetail"}],attrs:{type:"primary"},on:{click:function(t){return e.createData()}}},[e._v(" 确认 ")])],1)],1),a("el-dialog",{attrs:{title:"输出配置",visible:e.outputparamsvisible,"custom-class":"single_dal_view","close-on-click-modal":!1},on:{"update:visible":function(t){e.outputparamsvisible=t}}},[a("div",{staticClass:"block"},[a("el-form",{ref:"form",attrs:{model:e.temp,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"output plugins:",prop:"plugin_name"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择目标表集群"},model:{value:e.temp.plugin_name_item,callback:function(t){e.$set(e.temp,"plugin_name_item",t)},expression:"temp.plugin_name_item"}},e._l(e.temp.plugin_name_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.plugin_name,value:e.plugin_name}})})),1)],1),"event_file"===e.temp.plugin_name_item?a("div",[a("el-form-item",{attrs:{label:"plugin param:",prop:"plugin_param"}},[a("el-input",{attrs:{clearable:"",placeholder:"/home/barney/kunlun_cdc/temp/event.log"},model:{value:e.temp.plugin_param,callback:function(t){e.$set(e.temp,"plugin_param",t)},expression:"temp.plugin_param"}})],1),a("el-form-item",{attrs:{label:"udf name:",prop:"udf_name"}},[a("el-input",{attrs:{clearable:"",placeholder:"test1"},model:{value:e.temp.udf_name,callback:function(t){e.$set(e.temp,"udf_name",t)},expression:"temp.udf_name"}})],1)],1):a("div",[a("el-form-item",{attrs:{label:"ip地址:",prop:"kunlunsql_plugin_param.hostaddr"}},[a("el-input",{attrs:{clearable:"",placeholder:"ip地址"},model:{value:e.temp.kunlunsql_plugin_param.hostaddr,callback:function(t){e.$set(e.temp.kunlunsql_plugin_param,"hostaddr",t)},expression:"temp.kunlunsql_plugin_param.hostaddr"}})],1),a("el-form-item",{attrs:{label:"端口:",prop:"kunlunsql_plugin_param.port"}},[a("el-input",{attrs:{clearable:"",placeholder:"端口"},model:{value:e.temp.kunlunsql_plugin_param.port,callback:function(t){e.$set(e.temp.kunlunsql_plugin_param,"port",t)},expression:"temp.kunlunsql_plugin_param.port"}})],1),a("el-form-item",{attrs:{label:"用户名:",prop:"kunlunsql_plugin_param.user"}},[a("el-input",{attrs:{clearable:"",placeholder:"用户名"},model:{value:e.temp.kunlunsql_plugin_param.user,callback:function(t){e.$set(e.temp.kunlunsql_plugin_param,"user",t)},expression:"temp.kunlunsql_plugin_param.user"}})],1),a("el-form-item",{attrs:{label:"密码:",prop:"kunlunsql_plugin_param.password"}},[a("el-input",{attrs:{clearable:"",placeholder:"密码"},model:{value:e.temp.kunlunsql_plugin_param.password,callback:function(t){e.$set(e.temp.kunlunsql_plugin_param,"password",t)},expression:"temp.kunlunsql_plugin_param.password"}})],1),a("el-form-item",{attrs:{label:"日志地址:",prop:"kunlunsql_plugin_param.log_path"}},[a("el-input",{attrs:{clearable:"",placeholder:"日志地址"},model:{value:e.temp.kunlunsql_plugin_param.log_path,callback:function(t){e.$set(e.temp.kunlunsql_plugin_param,"log_path",t)},expression:"temp.kunlunsql_plugin_param.log_path"}})],1),a("el-form-item",{attrs:{label:"udf name:",prop:"udf_name"}},[a("el-input",{attrs:{clearable:"",placeholder:"test1"},model:{value:e.temp.udf_name,callback:function(t){e.$set(e.temp,"udf_name",t)},expression:"temp.udf_name"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.outputparamsvisible=!1}}},[e._v("关闭")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.dialogDetail,expression:"!dialogDetail"}],attrs:{type:"primary"},on:{click:function(t){return e.addOutputPlugins()}}},[e._v(" 确认 ")])],1)]),a("el-dialog",{attrs:{title:"Shard 配置",visible:e.ShardParamSvisible,"custom-class":"single_dal_view","close-on-click-modal":!1},on:{"update:visible":function(t){e.ShardParamSvisible=t}}},[a("div",{staticClass:"block"},[a("el-form",{ref:"form",attrs:{model:e.temp,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"shard id:",prop:"shard_id"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择目标表集群"},model:{value:e.temp.shard_params_item.shard_id,callback:function(t){e.$set(e.temp.shard_params_item,"shard_id",t)},expression:"temp.shard_params_item.shard_id"}},e._l(e.shardList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"dump hostaddr:",prop:"shard_params_item.dump_hostaddr"}},[a("el-input",{attrs:{clearable:"",placeholder:"dump hostaddr"},model:{value:e.temp.shard_params_item.dump_hostaddr,callback:function(t){e.$set(e.temp.shard_params_item,"dump_hostaddr",t)},expression:"temp.shard_params_item.dump_hostaddr"}})],1),a("el-form-item",{attrs:{label:"dump port:",prop:"shard_params_item.dump_port"}},[a("el-input",{attrs:{clearable:"",placeholder:"dump port"},model:{value:e.temp.shard_params_item.dump_port,callback:function(t){e.$set(e.temp.shard_params_item,"dump_port",t)},expression:"temp.shard_params_item.dump_port"}})],1),a("el-form-item",{attrs:{label:"binlog file:",prop:"shard_params_item.binlog_file"}},[a("el-input",{attrs:{clearable:"",placeholder:"binlog file"},model:{value:e.temp.shard_params_item.binlog_file,callback:function(t){e.$set(e.temp.shard_params_item,"binlog_file",t)},expression:"temp.shard_params_item.binlog_file"}})],1),a("el-form-item",{attrs:{label:"binlog pos:",prop:"shard_params_item.binlog_pos"}},[a("el-input",{attrs:{clearable:"",placeholder:"binlog pos"},model:{value:e.temp.shard_params_item.binlog_pos,callback:function(t){e.$set(e.temp.shard_params_item,"binlog_pos",t)},expression:"temp.shard_params_item.binlog_pos"}})],1),a("el-form-item",{attrs:{label:"gtid set:",prop:"shard_params_item.gtid_set"}},[a("el-input",{attrs:{clearable:"",placeholder:"gtid set"},model:{value:e.temp.shard_params_item.gtid_set,callback:function(t){e.$set(e.temp.shard_params_item,"gtid_set",t)},expression:"temp.shard_params_item.gtid_set"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.ShardParamSvisible=!1}}},[e._v("关闭")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.dialogDetail,expression:"!dialogDetail"}],attrs:{type:"primary"},on:{click:function(t){return e.addShardParams()}}},[e._v(" 确认 ")])],1)]),a("el-dialog",{attrs:{title:"参数",visible:e.cdcWorkerItemParamDg,"custom-class":"single_dal_view","close-on-click-modal":!1},on:{"update:visible":function(t){e.cdcWorkerItemParamDg=t}}},[a("json-viewer",{attrs:{value:e.expondInfo}})],1)],1)},i=[],s=(a("ac1f"),a("00b4"),a("d3b7"),a("159b"),a("b0c0"),a("a434"),a("e9c4"),a("a15b"),a("ed08")),r=a("349e"),n=a.n(r),o=a("82b0"),p=a("578a"),u=a("333d"),m=a("5c96"),d=a("1607"),c={name:"Account",components:{JsonViewer:n.a,Pagination:u["a"]},data:function(){var e=function(e,t,a){console.log(t);var l=/^((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}$/,i=t.split(","),s=!0;if(i.length)for(var r=0;r<i.length;r++)!1===l.test(i[r])&&(s=!1);if(""===t)return a(new Error("请输入IP地址"));s?a():a(new Error("请输入正确对IP地址"))},t=function(e,t,a){console.log(t),t?a():a(new Error("请输入目标名称"))},a=function(e,t,a){t?a():a(new Error("请选择目标类型"))};return{expondInfo:"",cdcWorkerItemParamDg:!1,shardparamsvisible:!1,outputparamsvisible:!1,ShardParamSvisible:!1,props:{multiple:!0},tableKey:0,list:null,shardList:[],MetaClusterList:null,listLoading:!0,searchLoading:!1,total:0,clusterOptions:[],repartition_tables:[],srcTableOptions:[],listQuery:{pageNo:1,pageSize:10,name:"",id:"",hostaddr:"",ha_mode:"rbr"},temp:{hostaddr:"",name:"name",stype:"",port:"",user:"ss",user_name:"",cluster_name:"",meta_db:"",meta_user:"",meta_passwd:"",dump_tables:"",shard_params:[],output_plugins:[],shard_params_item:{shard_id:"",dump_hostaddr:"",dump_port:"",binlog_file:"",binlog_pos:"",gtid_set:""},plugin_param:"",plugin_name_item:"event_file",plugin_name_list:[{plugin_name:"event_file",plugin_param:"",udf_name:""},{plugin_name:"event_sql",plugin_param:"",udf_name:""}],kunlunsql_plugin_param:{hostaddr:"",port:"",user:"",password:"",log_path:""}},dialogFormVisible:!1,dialogEditVisible:!1,dialogStatus:"",textMap:{update:"cdc 服务",create:"cdc 服务",detail:"详情"},dialogDetail:!1,message_tips:"",message_type:"",installStatus:!1,info:"",row:{},stypelist:p["r"],user_name:sessionStorage.getItem("login_username"),timer:null,dialogStatusVisible:!1,activities:[],rules:{hostaddr:[{required:!0,trigger:"blur",validator:e}],name:[{required:!0,trigger:"blur",validator:t}],stype:[{required:!0,trigger:"blur",validator:a}],port:[{required:!0,trigger:"blur",validator:t}],user:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:t}],log_path:[{required:!0,trigger:"blur",validator:t}],udf_name:[{required:!0,trigger:"blur",validator:t}],plugin_param:[{required:!0,trigger:"blur",validator:t}],meta_db:[{required:!0,trigger:"blur",validator:t}],meta_user:[{required:!0,trigger:"blur",validator:t}],meta_passwd:[{required:!0,trigger:"blur",validator:t}],cluster_name:[{required:!0,trigger:"blur",validator:t}],dump_tables:[{required:!0,trigger:"blur",validator:t}],plugin_name:[{required:!0,trigger:"blur",validator:t}],shard_params:[{required:!0,trigger:"blur",validator:t}],output_plugins:[{required:!0,trigger:"blur",validator:t}]}}},computed:{output:function(){return d["output"]}},mounted:function(){var e=this;Object(o["l"])({}).then((function(t){e.clusterOptions=t.list,e.src_cluster_id=e.clusterOptions[0].id,e.getPGTable()})),Object(o["X"])({pageNo:1,pageSize:10}).then((function(t){console.log(t),e.MetaClusterList=t.list}))},created:function(){this.getList()},destroyed:function(){clearInterval(this.timer),this.timer=null},methods:{showParam:function(e){console.log(e),this.expondInfo=e.worker_param,this.cdcWorkerItemParamDg=!0},getShardList:function(){var e=this,t=Object.assign({},this.listQuery);Object(o["Ab"])(t).then((function(t){e.shardList=t.list}))},handleChangeCluster:function(e){console.log(e),this.src_cluster_id=e,this.listQuery.id=e,this.getPGTable(),this.getShardList()},getPGTable:function(){var e=this,t=sessionStorage.getItem("login_username");Object(o["eb"])({name:t,cluster_id:this.src_cluster_id}).then((function(t){e.srcTableOptions=t.list}))},handleTableChange:function(){var e=this.$refs["tableOptions"].getCheckedNodes();console.log(e)},onDstClusterChange:function(e){var t=this;if(""===e)this.ditTableOptions=[];else{var a=m["Loading"].service({target:"form"});Object(o["eb"])({cluster_id:e}).then((function(e){t.ditTableOptions=e.list})).finally((function(){a.close()}))}this.form.repartition_tables.forEach((function(e,a){t.form.repartition_tables[a].ditTable=[]}))},changeValue:function(e){console.log(e),this.temp.stype=e},beforeSyncDestory:function(){clearInterval(this.timer),this.dialogStatusVisible=!1,this.timer=null},handleFilter:function(){this.listQuery.pageNo=1,this.getList()},handleClear:function(){this.listQuery.name="",this.listQuery.pageNo=1,this.getList()},getList:function(){var e=this;this.listLoading=!0,this.installStatus=!1;var t=Object.assign({},this.listQuery);Object(o["a"])(t).then((function(t){!1!==t.list?(t.list.forEach((function(e){e.worker_param.paras.output_plugins.forEach((function(e){e.plugin_param=decodeURIComponent(e.plugin_param)}))})),e.list=t.list,e.total=t.total):(e.list=[],e.total=0),setTimeout((function(){e.listLoading=!1}),500)}))},resetTemp:function(){this.temp={hostaddr:"",name:"name",stype:"",port:"",user:"",user_name:"",cluster_name:"",meta_db:"",meta_user:"",meta_passwd:"",dump_tables:"",shard_params:[],output_plugins:[],kunlunsql_plugin_param:{hostaddr:"",port:"",user:"",password:"",log_path:""},shard_params_item:{shard_id:"",dump_hostaddr:"",dump_port:"",binlog_file:"",binlog_pos:"",gtid_set:""},plugin_name_item:"event_file",plugin_name_list:[{plugin_name:"event_file",plugin_param:"",udf_name:""},{plugin_name:"event_sql",plugin_param:"",udf_name:""}],plugin_name:"event_file",udf_name:"",plugin_param:""}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.dialogDetail=!1,this.$nextTick((function(){e.$refs.dataForm.clearValidate()}))},indexMethod:function(e){return 2*e},deleteOutputParams:function(e,t){var a=this;Object(s["f"])("此操作删除该数据, 是否继续?").then((function(){a.temp.output_plugins.splice(e,1)})).catch((function(){Object(s["g"])("已取消删除","info")}))},deleteShardParams:function(e,t){var a=this;Object(s["f"])("此操作删除该数据, 是否继续?").then((function(){a.temp.shard_params.splice(e,1)})).catch((function(){Object(s["g"])("已取消删除","info")}))},addShardParams:function(){this.temp.shard_params.push(this.temp.shard_params_item),this.ShardParamSvisible=!1,this.dialogFormVisible=!0},addOutputPlugins:function(){var e=this;if("event_file"===e.temp.plugin_name_item){var t={plugin_name:"event_file",plugin_param:e.temp.plugin_param,udf_name:e.temp.udf_name};e.message_tips="成功",e.message_type="success",e.dialogFormVisible=!1,Object(s["g"])(this.message_tips,this.message_type),e.temp.output_plugins.push(t),e.outputparamsvisible=!1,e.dialogFormVisible=!0}else{var a={plugin_name:"event_sql",plugin_param:JSON.stringify(e.temp.kunlunsql_plugin_param),udf_name:e.temp.udf_name};e.message_tips="成功",e.message_type="success",e.dialogFormVisible=!1,Object(s["g"])(this.message_tips,this.message_type),e.temp.output_plugins.push(a),e.outputparamsvisible=!1,e.dialogFormVisible=!0}},createData:function(){var e=this,t=this;this.$refs["dataForm"].validate((function(a){if(a){var l={job_id:"",job_type:"add_dump_table",version:"1.0"};l.timestamp=p["s"][0].time+"",l.user_name=sessionStorage.getItem("login_username");var i="";e.clusterOptions.forEach((function(e){e.id===t.temp.cluster_name&&(i=e.name)}));var r=[];e.temp.dump_tables.forEach((function(e){r.push(e[0]+"_$$_"+e[1]+"."+e[2])}));var n={meta_db:e.temp.meta_db.join(","),meta_user:e.temp.meta_user,meta_passwd:e.temp.meta_passwd,cluster_name:i,dump_tables:r.join(","),output_plugins:e.temp.output_plugins,shard_params:e.temp.shard_params};console.log(n),l.paras=n,Object(o["x"])(l).then((function(t){200===t.code?(e.getList(),e.message_tips="成功",e.message_type="success",e.dialogFormVisible=!1,Object(s["g"])(e.message_tips,e.message_type)):(e.message_tips=t.message,e.message_type="error",Object(s["g"])(e.message_tips,e.message_type))}))}}))},handleDetail:function(e){this.dialogStatus="detail",this.dialogFormVisible=!0,this.temp=Object.assign({},e),this.dialogDetail=!0},handleUpdate:function(e){var t=this;this.temp=Object.assign({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.dialogDetail=!1,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var a={job_id:"",job_type:"update_backup_storage"};a.version=p["u"][0].ver,a.timestamp=p["s"][0].time+"",a.user_name=sessionStorage.getItem("login_username"),a.paras=Object.assign({},e.temp),Object(o["Jb"])(a).then((function(e){}))}}))},handleDelete:function(e){var t=this;Object(s["f"])("此操作将永久删除该数据, 是否继续?").then((function(){var a={};a.paras={name:e.id},Object(o["c"])(a).then((function(e){200===e.code?(t.getList(),t.message_tips="成功",t.message_type="success",t.variableVisible=!1,Object(s["g"])(t.message_tips,t.message_type)):(t.message_tips=e.message,t.message_type="error",Object(s["g"])(t.message_tips,t.message_type))}))})).catch((function(){console.log("quxiao"),Object(s["g"])("已取消删除","info")}))},getStatus:function(e,t,a,l){}}},_=c,g=a("2877"),b=Object(g["a"])(_,l,i,!1,null,null,null);t["default"]=b.exports}}]);