(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e0a77034"],{"0ccb":function(e,t,i){var s=i("50c4"),a=i("1148"),l=i("1d80"),n=Math.ceil,o=function(e){return function(t,i,o){var r,c,u=String(l(t)),m=u.length,d=void 0===o?" ":String(o),p=s(i);return p<=m||""==d?u:(r=p-m,c=a.call(d,n(r/d.length)),c.length>r&&(c=c.slice(0,r)),e?u+c:c+u)}};e.exports={start:o(!1),end:o(!0)}},1148:function(e,t,i){"use strict";var s=i("a691"),a=i("1d80");e.exports="".repeat||function(e){var t=String(a(this)),i="",l=s(e);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(t+=t))1&l&&(i+=t);return i}},"362e":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("div",{staticClass:"table-list-search-wrap"},[i("el-input",{staticClass:"list_search_keyword",attrs:{placeholder:"可输入目标名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),i("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" 查询 ")]),i("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:e.handleClear}},[e._v(" 重置 ")]),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("新增 ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.installStatus,expression:"installStatus === true"}],staticClass:"info",domProps:{textContent:e._s(e.info)}})],1),i("div",{staticClass:"table-list-wrap"})]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.list,border:"","highlight-current-row":""}},[e._v(" > "),i("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),i("el-table-column",{attrs:{prop:"host_addr",align:"center",label:"IP地址"}}),i("el-table-column",{attrs:{prop:"port",align:"center",label:"端口号"}}),i("el-table-column",{attrs:{prop:"master",align:"center",label:"主节点"}}),i("el-table-column",{attrs:{prop:"status",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[1==s.status?i("el-tag",[e._v("服务中")]):i("el-tag",{attrs:{type:"danger"}},[e._v("无效")])]}}])}),"super_dba"===e.user_name?i("el-table-column",{attrs:{label:"操作",align:"center",width:"300","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row,a=t.$index;return["super_dba"===e.user_name?i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(s,a)}}},[e._v("删除 ")]):e._e()]}}],null,!1,2378822912)}):e._e()],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listQuery.pageNo,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNo",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}}),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,"custom-class":"single_dal_view"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-position":"left"}},e._l(e.form.temp,(function(t,s){return i("el-row",{key:s},[i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"IP地址("+s+"):","label-width":"140px",prop:"temp."+s+".hostaddr",rules:{required:!0,message:"IP地址不能空",trigger:"blur"}}},[i("el-input",{key:s,attrs:{placeholder:"请输入IP地址"},model:{value:e.form.temp[s].hostaddr,callback:function(t){e.$set(e.form.temp[s],"hostaddr",t)},expression:"form.temp[index].hostaddr"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"端口号:","label-width":"80px",prop:"temp."+s+".port",rules:{required:!0,message:"端口不能空",trigger:"blur"}}},[i("el-input",{attrs:{placeholder:"请输入端口号"},model:{value:e.form.temp[s].port,callback:function(t){e.$set(e.form.temp[s],"port",t)},expression:"form.temp[index].port"}})],1)],1),i("el-col",{staticStyle:{"margin-top":"4px"},attrs:{span:4}},[i("div",{staticStyle:{"margin-left":"3px"}},[i("el-button",0===s?{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.onPush(s)}}}:{attrs:{icon:"el-icon-minus",size:"small"},on:{click:function(t){return e.onRemove(s)}}})],1)])],1)})),1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.dialogDetail,expression:"!dialogDetail"}],on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关闭")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.dialogDetail,expression:"!dialogDetail"}],attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData(e.row)}}},[e._v(" 确认 ")])],1)],1),i("el-dialog",{attrs:{visible:e.dialogStatusVisible,"custom-class":"single_dal_view",width:"400px","close-on-click-modal":!1,"before-close":e.beforeSyncDestory},on:{"update:visible":function(t){e.dialogStatusVisible=t}}},[i("div",{staticClass:"block"},[i("el-timeline",e._l(e.activities,(function(t,s){return i("el-timeline-item",{key:s,attrs:{icon:t.icon,type:t.type,color:t.color,size:t.size,timestamp:t.timestamp}},[e._v(" "+e._s(t.content)+" ")])})),1)],1)])],1)},a=[],l=(i("b0c0"),i("a434"),i("ed08")),n=i("82b0"),o=i("578a"),r=i("333d"),c={name:"Account",components:{Pagination:r["a"]},data:function(){return{tableKey:0,list:null,listLoading:!0,searchLoading:!1,total:0,listQuery:{pageNo:1,pageSize:10,name:""},form:{temp:[{hostaddr:"",name:"",stype:"",port:"",user_name:""}]},dialogFormVisible:!1,dialogEditVisible:!1,dialogStatus:"",textMap:{update:"cdc 服务",create:"cdc 服务",detail:"详情"},dialogDetail:!1,message_tips:"",message_type:"",installStatus:!1,info:"",row:{},stypelist:o["r"],user_name:sessionStorage.getItem("login_username"),timer:null,dialogStatusVisible:!1,activities:[],rules:{}}},created:function(){this.getList()},destroyed:function(){clearInterval(this.timer),this.timer=null},methods:{changeValue:function(e){console.log(e),this.temp.stype=e},beforeSyncDestory:function(){clearInterval(this.timer),this.dialogStatusVisible=!1,this.timer=null},handleFilter:function(){this.listQuery.pageNo=1,this.getList()},handleClear:function(){this.listQuery.name="",this.listQuery.pageNo=1,this.getList()},getList:function(){var e=this;this.listLoading=!0,this.installStatus=!1;var t=Object.assign({},this.listQuery);Object(n["B"])(t).then((function(t){!1!==t.list?(e.list=t.list,e.total=t.total):(e.list=[],e.total=0),setTimeout((function(){e.listLoading=!1}),500)}))},resetTemp:function(){this.form.temp=[{hostaddr:"",name:"",stype:"HDFS",port:"",user_name:""}]},onPush:function(e){this.form.temp.push({hostaddr:"",name:"",stype:"HDFS",port:"",user_name:""})},onRemove:function(e){this.form.temp.splice(e,1)},handleCreate:function(){this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.dialogDetail=!1},createData:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var i={job_id:"",job_type:"get_leader",version:"1.0"};i.timestamp=o["s"][0].time+"",i.user_name=sessionStorage.getItem("login_username"),i.paras=e.form,Object(n["u"])(i).then((function(t){console.log(t),200===t.code?(e.getList(),e.message_tips="成功",e.message_type="success",e.dialogFormVisible=!1,Object(l["g"])(e.message_tips,e.message_type)):(e.message_tips=t.message,e.message_type="error",Object(l["g"])(e.message_tips,e.message_type))}))}}))},handleDetail:function(e){this.dialogStatus="detail",this.dialogFormVisible=!0,this.temp=Object.assign({},e),this.dialogDetail=!0},handleUpdate:function(e){var t=this;this.temp=Object.assign({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.dialogDetail=!1,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var i={job_id:"",job_type:"update_backup_storage"};i.version=o["u"][0].ver,i.timestamp=o["s"][0].time+"",i.user_name=sessionStorage.getItem("login_username"),i.paras=Object.assign({},e.temp),Object(n["Gb"])(i).then((function(t){console.log(t),200===t.code?(e.getList(),e.message_tips="成功",e.message_type="success",e.variableVisible=!1,Object(l["g"])(e.message_tips,e.message_type)):(e.message_tips=t.message,e.message_type="error",Object(l["g"])(e.message_tips,e.message_type))}))}}))},handleDelete:function(e){var t=this;Object(l["f"])("此操作将永久删除该数据, 是否继续?").then((function(){var i={};i.paras={name:e.id},Object(n["a"])(i).then((function(e){200===e.code?(t.getList(),t.message_tips="成功",t.message_type="success",t.variableVisible=!1,Object(l["g"])(t.message_tips,t.message_type)):(t.message_tips=e.message,t.message_type="error",Object(l["g"])(t.message_tips,t.message_type))}))})).catch((function(){console.log("quxiao"),Object(l["g"])("已取消删除","info")}))},getStatus:function(e,t,i,s){var a=this;setTimeout((function(){var r={job_type:"get_status"};r.version=o["u"][0].ver,r.job_id=t,r.timestamp=o["s"][0].time+"",r.paras={},Object(n["N"])(r).then((function(t){if("done"===t.status||"failed"===t.status)if("done"===t.status){var n={content:s+"成功",timestamp:Object(l["d"])(),color:"#0bbd87",icon:"el-icon-circle-check"};a.activities.push(n),a.getList(),clearInterval(e)}else if(null==t.attachment&&"70001"===t.error_code&&"failed"===t.status){if(i>5){var o={content:t.error_info,timestamp:Object(l["d"])(),color:"red",icon:"el-icon-circle-close"};a.activities.push(o),clearInterval(e)}}else{var r={content:t.error_info,timestamp:Object(l["d"])(),color:"red",icon:"el-icon-circle-close"};a.activities.push(r),clearInterval(e)}})),i>=86400&&clearInterval(e)}),0)}}},u=c,m=i("2877"),d=Object(m["a"])(u,s,a,!1,null,null,null);t["default"]=d.exports},"4d90":function(e,t,i){"use strict";var s=i("23e7"),a=i("0ccb").start,l=i("9a0c");s({target:"String",proto:!0,forced:l},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"9a0c":function(e,t,i){var s=i("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(s)}}]);