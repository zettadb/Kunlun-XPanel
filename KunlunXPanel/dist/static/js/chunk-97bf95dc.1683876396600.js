(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97bf95dc"],{"0de8":function(t,e,r){"use strict";r("51f3")},"51e5":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"online_table",style:{height:t.screenHeight+"px"}},[r("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.data,props:t.defaultProps,"default-expand-all":"","filter-node-method":t.filterNode}})],1),r("div",{staticStyle:{float:"right",width:"80%",height:"630px"}},[r("el-button",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}],staticClass:"el-icon-video-play",staticStyle:{"padding-left":"30px","font-size":"14px"},attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleResult()}}},[t._v("运行")]),r("el-button",{staticClass:"el-icon-magic-stick",staticStyle:{"padding-left":"10px","font-size":"14px"},attrs:{type:"text",size:"mini"},on:{click:function(e){return t.sqlFormat()}}},[t._v("格式化SQL")]),r("el-button",{staticClass:"el-icon-delete",staticStyle:{"padding-left":"10px","font-size":"14px"},attrs:{type:"text",size:"mini"},on:{click:function(e){return t.del()}}},[t._v("一键清空")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.stmt,expression:"stmt"}],ref:"mycode",staticClass:"codesql",staticStyle:{border:"0","border-radius":"5px","background-color":"rgba(241,241,241,.98)",width:"100%",height:"30%",padding:"10px",resize:"none","font-size":"14px"},attrs:{placeholder:"请输入sql语句...",maxlength:"2000"},domProps:{value:t.stmt},on:{input:[function(e){e.target.composing||(t.stmt=e.target.value)},t.descInput]}}),r("div",{staticStyle:{width:"100%",height:"70%","margin-top":"15px"}},[r("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"信息",name:"1"},domProps:{innerHTML:t._s(t.info)}},[t._v(t._s(t.info))]),r("el-tab-pane",{attrs:{label:"历史",name:"2"}},[r("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{height:"360",data:t.history,border:"","highlight-current-row":""}},[r("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),r("el-table-column",{attrs:{align:"center",label:"SQL(双击SQL粘贴至上方)"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("span",{staticClass:"link-type",on:{dblclick:function(e){return t.copyVale(n.sql)}}},[t._v(t._s(n.sql))])]}}])}),r("el-table-column",{attrs:{prop:"result",align:"center",label:"状态"}}),r("el-table-column",{attrs:{prop:"time",align:"center",label:"开始时间"}}),r("el-table-column",{attrs:{prop:"ms",align:"center",label:"耗时（ms）"}})],1)],1),t._l(t.editableTabs,(function(e){return r("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[r("el-table",{attrs:{data:e.selectList,height:"360"}},t._l(e.selectListTitle,(function(t){return r("el-table-column",{key:t,attrs:{prop:t,label:t}})})),1)],1)}))],2)],1)],1)])},u=[],a=(r("4de4"),r("d3b7"),r("159b"),r("a18c")),o=r("82b0"),s=r("ed08"),i=(r("0f7c"),r("a7be"),r("f6b6"),r("db05")),c=r.n(i),l=r("56b3");r("8c33"),r("31c5"),r("ffda"),r("9b74"),r("991c");var d={name:"experience",data:function(){return{filterText:"",data:[{}],defaultProps:{children:"children",label:"label"},remnant:2e3,stmt:"",editableTabs:[],flag:!0,selectList:[],selectListTitle:[],history:[],info:"",activeName:"1",screenHeight:document.body.clientHeight-80}},watch:{filterText:function(t){this.$refs.tree.filter(t)},screenHeight:function(t){if(!this.timer){this.screenHeight=t,this.timer=!0;var e=this;setTimeout((function(){e.timer=!1}),400)}}},mounted:function(){var t=this;this.getComp();var e=this;window.onresize=function(){return function(){window.screenHeight=document.body.clientHeight-80,e.screenHeight=window.screenHeight}()};var r="text/x-pgsql";this.editor=l.fromTextArea(this.$refs.mycode,{mode:r,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autofocus:!0,extraKeys:{Ctrl:"autocomplete"},hintOptions:{completeSingle:!1},lineWrapping:!1,foldGutter:!0,autoCloseBrackets:!0,autoCloseTags:!0,matchTags:{bothTags:!0},styleSelectedText:!0,styleActiveLine:!0,autoRefresh:!0,highlightSelectionMatches:{minChars:2,trim:!0,style:"matchhighlight",showToken:!1}}),this.editor.on("inputRead",(function(){t.editor.showHint()}))},methods:{filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},getComp:function(){var t=this,e=sessionStorage.getItem("apply_all_cluster"),r=sessionStorage.getItem("affected_clusters"),n=sessionStorage.getItem("login_username");if(2==e&&0===r.length)a["c"].push("/404");else{var u={effectCluster:r,user_name:n};Object(o["F"])(u).then((function(e){if(200==e.code){for(var r in e.res)t.$set(t.data[0],r,e.res[r]);sessionStorage.setItem("ip",e.ip),sessionStorage.setItem("port",e.port),sessionStorage.setItem("db",e.db)}else 501==e.code?a["c"].push("/404"):Object(s["g"])(e.message,"error")}))}},descInput:function(){console.log(11);var t=this.editor.getValue().length;this.remnant=2e3-t},handleResult:function(){var t=this;if(this.flag=!1,!this.editor.getValue())return this.flag=!0,void Object(s["g"])("sql语句不能为空！","error");if(this.editor.getValue().length>2e3)return this.flag=!0,void Object(s["g"])("请输入2000字节以内的sql语句！","error");var e={text:this.editor.getValue(),ip:sessionStorage.getItem("ip"),port:sessionStorage.getItem("port"),db:sessionStorage.getItem("db")};Object(o["I"])(e).then((function(e){if(200==e.code){if(t.flag=!0,t.info=e.len,e.res_date.length>0){var r=[],n=e.res_date;n.forEach((function(t,e){var n={title:"结果"+(e+1),name:"'"+(e+3)+"'",selectList:t.arr,selectListTitle:t.title};r.push(n)})),t.editableTabs=r}else t.editableTabs=[];t.history=e.history,t.getComp()}}))},copyVale:function(t){this.editor.setValue(this.editor.getValue()+t)},sqlFormat:function(){this.editor.getValue(),this.editor.setValue(c.a.format("select * from test;"))},del:function(){this.editor.setValue("")}}},f=d,h=(r("da20"),r("0de8"),r("2877")),m=Object(h["a"])(f,n,u,!1,null,"9f34b596",null);e["default"]=m.exports},"51f3":function(t,e,r){},"71e1":function(t,e,r){},"82b0":function(t,e,r){"use strict";r.d(e,"x",(function(){return u})),r.d(e,"F",(function(){return a})),r.d(e,"I",(function(){return o})),r.d(e,"k",(function(){return s})),r.d(e,"l",(function(){return i})),r.d(e,"f",(function(){return c})),r.d(e,"u",(function(){return l})),r.d(e,"hb",(function(){return d})),r.d(e,"lb",(function(){return f})),r.d(e,"s",(function(){return h})),r.d(e,"W",(function(){return m})),r.d(e,"d",(function(){return p})),r.d(e,"b",(function(){return b})),r.d(e,"c",(function(){return g})),r.d(e,"G",(function(){return C})),r.d(e,"z",(function(){return O})),r.d(e,"n",(function(){return j})),r.d(e,"m",(function(){return v})),r.d(e,"o",(function(){return S})),r.d(e,"qb",(function(){return x})),r.d(e,"rb",(function(){return y})),r.d(e,"sb",(function(){return w})),r.d(e,"tb",(function(){return k})),r.d(e,"jb",(function(){return L})),r.d(e,"kb",(function(){return T})),r.d(e,"E",(function(){return I})),r.d(e,"wb",(function(){return N})),r.d(e,"O",(function(){return _})),r.d(e,"ab",(function(){return B})),r.d(e,"cb",(function(){return M})),r.d(e,"db",(function(){return V})),r.d(e,"U",(function(){return H})),r.d(e,"bb",(function(){return D})),r.d(e,"C",(function(){return q})),r.d(e,"v",(function(){return z})),r.d(e,"ub",(function(){return E})),r.d(e,"a",(function(){return P})),r.d(e,"e",(function(){return R})),r.d(e,"yb",(function(){return U})),r.d(e,"p",(function(){return A})),r.d(e,"ib",(function(){return F})),r.d(e,"Y",(function(){return $})),r.d(e,"X",(function(){return J})),r.d(e,"D",(function(){return Q})),r.d(e,"P",(function(){return W})),r.d(e,"Q",(function(){return G})),r.d(e,"w",(function(){return K})),r.d(e,"g",(function(){return Y})),r.d(e,"Z",(function(){return X})),r.d(e,"A",(function(){return Z})),r.d(e,"B",(function(){return tt})),r.d(e,"V",(function(){return et})),r.d(e,"S",(function(){return rt})),r.d(e,"r",(function(){return nt})),r.d(e,"H",(function(){return ut})),r.d(e,"mb",(function(){return at})),r.d(e,"L",(function(){return ot})),r.d(e,"M",(function(){return st})),r.d(e,"t",(function(){return it})),r.d(e,"ob",(function(){return ct})),r.d(e,"fb",(function(){return lt})),r.d(e,"gb",(function(){return dt})),r.d(e,"R",(function(){return ft})),r.d(e,"i",(function(){return ht})),r.d(e,"pb",(function(){return mt})),r.d(e,"N",(function(){return pt})),r.d(e,"nb",(function(){return bt})),r.d(e,"q",(function(){return gt})),r.d(e,"j",(function(){return Ct})),r.d(e,"eb",(function(){return Ot})),r.d(e,"y",(function(){return jt})),r.d(e,"vb",(function(){return vt})),r.d(e,"T",(function(){return St})),r.d(e,"h",(function(){return xt})),r.d(e,"J",(function(){return yt})),r.d(e,"K",(function(){return wt})),r.d(e,"xb",(function(){return kt}));var n=r("b775");function u(t){return Object(n["a"])({url:"/user/Cluster/clusterList",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/user/Cluster/getEffectComp",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/user/Cluster/getExperience",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/user/Cluster/createCluster",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/user/Cluster/delCluster",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/user/Cluster/backUpCluster",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/user/Cluster/getBackUpList",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/user/Cluster/ifBackUp",method:"post",data:{id:t}})}function f(t){return Object(n["a"])({url:"/user/Cluster/restoreCluster",method:"post",data:t})}function h(){return Object(n["a"])({url:"/user/Cluster/getAllMachine",method:"get",params:""})}function m(t){return Object(n["a"])({url:"/user/Cluster/getShards",method:"post",data:{id:t}})}function p(t){return Object(n["a"])({url:"/user/Cluster/addShards",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/user/Cluster/addComps",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/user/Cluster/addNodes",method:"post",data:t})}function C(t){return Object(n["a"])({url:"/user/Cluster/getStatus",method:"post",data:t})}function O(t){return Object(n["a"])({url:"/user/Cluster/getClusterNodesList",method:"post",data:t})}function j(t){return Object(n["a"])({url:"/user/Cluster/delShard",method:"post",data:t})}function v(t){return Object(n["a"])({url:"/user/Cluster/delComp",method:"post",data:t})}function S(t){return Object(n["a"])({url:"/user/Cluster/delSnode",method:"post",data:t})}function x(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function y(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function w(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function k(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function L(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function T(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function I(t){return Object(n["a"])({url:"/user/Cluster/getEffectCluster",method:"post",data:t})}function N(t){return Object(n["a"])({url:"/user/Cluster/updateAssign",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/user/Cluster/getNode",method:"post",data:t})}function B(t){return Object(n["a"])({url:"/user/Cluster/getStandbyNode",method:"post",data:t})}function M(t){return Object(n["a"])({url:"/user/Cluster/getSwitcheOverList",method:"get",params:t})}function V(t){return Object(n["a"])({url:"/user/Cluster/getTaskList",method:"get",params:t})}function H(t){return Object(n["a"])({url:"/user/Cluster/getShardPrimary",method:"post",data:t})}function D(){return Object(n["a"])({url:"/user/Cluster/getStroMachine",method:"get",params:""})}function q(){return Object(n["a"])({url:"/user/Cluster/getCompMachine",method:"get",params:""})}function z(t){return Object(n["a"])({url:"/user/Cluster/getBackUpStorage",method:"post",data:t})}function E(t){return Object(n["a"])({url:"/user/Cluster/switchShard",method:"post",data:t})}function P(t){return Object(n["a"])({url:"/user/Cluster/SetCpuCgroup",method:"post",data:t})}function R(t){return Object(n["a"])({url:"/user/Cluster/addStorage",method:"post",data:t})}function U(t){return Object(n["a"])({url:"/user/Cluster/updateStorage",method:"post",data:t})}function A(t){return Object(n["a"])({url:"/user/Cluster/delStorage",method:"post",data:t})}function F(t){return Object(n["a"])({url:"/user/Cluster/rebuildNode",method:"post",data:t})}function $(t){return Object(n["a"])({url:"/user/Cluster/getShardsJobLog",method:"post",data:t})}function J(t){return Object(n["a"])({url:"/user/Cluster/getShardsCount",method:"get",params:t})}function Q(t){return Object(n["a"])({url:"/user/Cluster/getCompsCount",method:"get",params:t})}function W(t){return Object(n["a"])({url:"/user/Cluster/getNodesCount",method:"get",params:t})}function G(t){return Object(n["a"])({url:"/user/Cluster/getOldCluster",method:"get",params:t})}function K(){return Object(n["a"])({url:"/user/Cluster/getBackupStorageList",method:"get",params:""})}function Y(t){return Object(n["a"])({url:"/user/Cluster/clusterListError",method:"get",params:t})}function X(t){return Object(n["a"])({url:"/user/Cluster/getShardsName",method:"get",params:t})}function Z(t){return Object(n["a"])({url:"/user/Cluster/getCompDBName",method:"get",params:t})}function tt(t){return Object(n["a"])({url:"/user/Cluster/getCompDBTable",method:"get",params:t})}function et(t){return Object(n["a"])({url:"/user/Cluster/getShardTable",method:"get",params:t})}function rt(t){return Object(n["a"])({url:"/user/Cluster/getOtherShards",method:"get",params:t})}function nt(t){return Object(n["a"])({url:"/user/Cluster/expandCluster",method:"post",data:t})}function ut(t){return Object(n["a"])({url:"/user/Cluster/getExpandTableList",method:"post",data:t})}function at(t){return Object(n["a"])({url:"/user/Cluster/setMaxDalay",method:"post",data:t})}function ot(t){return Object(n["a"])({url:"/user/Cluster/getMaxDalay",method:"post",data:t})}function st(t){return Object(n["a"])({url:"/user/Cluster/getMetaCluster",method:"get",params:t})}function it(t){return Object(n["a"])({url:"/user/Cluster/getBackStorageList",method:"get",params:t})}function ct(t){return Object(n["a"])({url:"/user/Cluster/setVariable",method:"post",data:t})}function lt(t){return Object(n["a"])({url:"/user/Cluster/getVariable",method:"post",data:t})}function dt(t){return Object(n["a"])({url:"/user/Cluster/getWorkMode",method:"post",data:t})}function ft(t){return Object(n["a"])({url:"/user/Cluster/getOneBackUpList",method:"get",params:t})}function ht(t){return Object(n["a"])({url:"/user/Cluster/computeList",method:"get",params:t})}function mt(t){return Object(n["a"])({url:"/user/Cluster/shardList",method:"get",params:t})}function pt(t){return Object(n["a"])({url:"/user/Cluster/getNoSwitchList",method:"post",data:t})}function bt(t){return Object(n["a"])({url:"/user/Cluster/setNoSwitch",method:"post",data:t})}function gt(t){return Object(n["a"])({url:"/user/Cluster/delSwitch",method:"post",data:t})}function Ct(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function Ot(t){return Object(n["a"])({url:"/user/Cluster/getThisShardNodes",method:"post",data:t})}function jt(t){return Object(n["a"])({url:"/user/Cluster/getClusterMonitor",method:"get",params:t})}function vt(t){return Object(n["a"])({url:"/user/ClusterSetting/tableRepartition",method:"post",data:t})}function St(t){return Object(n["a"])({url:"/user/ClusterSetting/getPGTableList",method:"get",params:t})}function xt(t){return Object(n["a"])({url:"/user/ClusterSetting/clusterOptions",method:"get",params:t})}function yt(t){return Object(n["a"])({url:"/user/Cluster/getLogicalBackUpList",method:"get",params:t})}function wt(t){return Object(n["a"])({url:"/user/ClusterSetting/getRecordLogicalBackup",method:"get",params:t})}function kt(t){return Object(n["a"])({url:"/user/Cluster/updateShard",method:"post",data:t})}},da20:function(t,e,r){"use strict";r("71e1")},ed08:function(t,e,r){"use strict";r.d(e,"g",(function(){return u})),r.d(e,"f",(function(){return a})),r.d(e,"b",(function(){return o})),r.d(e,"d",(function(){return s})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return c})),r.d(e,"e",(function(){return l}));r("53ca"),r("ac1f"),r("00b4"),r("5319"),r("4d63"),r("2c3e"),r("25f0"),r("d3b7"),r("4d90"),r("159b");var n=r("5c96");function u(t,e){return Object(n["Message"])({message:t,type:e,duration:2e3})}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"确定执行此操作吗？",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";return n["MessageBox"].confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:e,center:!0})}function o(t){var e=t.split("T");return e[0]+" "+e[1]}function s(){var t=new Date,e="-",r=":",n=t.getFullYear(),u=t.getMonth()+1,a=t.getDate(),o=t.getHours(),s=t.getMinutes(),i=t.getSeconds(),c=["星期一","星期二","星期三","星期四","星期五","星期六","星期天"];c[t.getDay()];u>=1&&u<=9&&(u="0"+u),a>=0&&a<=9&&(a="0"+a),o>=0&&o<=9&&(o="0"+o),s>=0&&s<=9&&(s="0"+s),i>=0&&i<=9&&(i="0"+i);var l=n+e+u+e+a+" "+o+r+s+r+i;return l}function i(t){var e=t.split("-"),r=e[0],n=e[1],u=e[2],a=new Date(r,n,0);a=a.getDate();var o=r,s=parseInt(n)+1;13==s&&(o=parseInt(o)+1,s=1);var i=u,c=new Date(o,s,0);c=c.getDate(),i>c&&(i=c),s<10&&(s="0"+s);var l=o+"-"+s+"-"+i;return l}function c(){for(var t="",e=4,r=new Array(0,1,2,3,4,5,6,7,8,9),n=0;n<e;n++){var u=Math.floor(9*Math.random());t+=r[u]}return t}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"确定执行此操作吗？",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";return n["MessageBox"].prompt(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入code",inputPattern:/^[0-9]\d*$/,inputErrorMessage:"code格式不正确",type:e})}}}]);