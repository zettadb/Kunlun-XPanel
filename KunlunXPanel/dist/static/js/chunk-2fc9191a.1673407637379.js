(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fc9191a"],{"0ccb":function(t,e,r){var n=r("50c4"),u=r("1148"),o=r("1d80"),a=Math.ceil,s=function(t){return function(e,r,s){var i,c,d=String(o(e)),l=d.length,f=void 0===s?" ":String(s),p=n(r);return p<=l||""==f?d:(i=p-l,c=u.call(f,a(i/f.length)),c.length>i&&(c=c.slice(0,i)),t?d+c:c+d)}};t.exports={start:s(!1),end:s(!0)}},1148:function(t,e,r){"use strict";var n=r("a691"),u=r("1d80");t.exports="".repeat||function(t){var e=String(u(this)),r="",o=n(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(r+=e);return r}},"4d90":function(t,e,r){"use strict";var n=r("23e7"),u=r("0ccb").start,o=r("9a0c");n({target:"String",proto:!0,forced:o},{padStart:function(t){return u(this,t,arguments.length>1?arguments[1]:void 0)}})},7590:function(t,e,r){t.exports=r.p+"static/img/compnode.1673407637379.png"},"7abb":function(t,e,r){},"82b0":function(t,e,r){"use strict";r.d(e,"x",(function(){return u})),r.d(e,"F",(function(){return o})),r.d(e,"I",(function(){return a})),r.d(e,"k",(function(){return s})),r.d(e,"l",(function(){return i})),r.d(e,"f",(function(){return c})),r.d(e,"u",(function(){return d})),r.d(e,"fb",(function(){return l})),r.d(e,"jb",(function(){return f})),r.d(e,"s",(function(){return p})),r.d(e,"U",(function(){return h})),r.d(e,"d",(function(){return m})),r.d(e,"b",(function(){return b})),r.d(e,"c",(function(){return g})),r.d(e,"G",(function(){return C})),r.d(e,"z",(function(){return O})),r.d(e,"n",(function(){return j})),r.d(e,"m",(function(){return v})),r.d(e,"o",(function(){return S})),r.d(e,"ob",(function(){return N})),r.d(e,"pb",(function(){return x})),r.d(e,"qb",(function(){return w})),r.d(e,"rb",(function(){return M})),r.d(e,"hb",(function(){return k})),r.d(e,"ib",(function(){return _})),r.d(e,"E",(function(){return y})),r.d(e,"ub",(function(){return P})),r.d(e,"M",(function(){return L})),r.d(e,"Y",(function(){return B})),r.d(e,"ab",(function(){return T})),r.d(e,"bb",(function(){return I})),r.d(e,"S",(function(){return D})),r.d(e,"Z",(function(){return $})),r.d(e,"C",(function(){return R})),r.d(e,"v",(function(){return E})),r.d(e,"sb",(function(){return G})),r.d(e,"a",(function(){return V})),r.d(e,"e",(function(){return z})),r.d(e,"vb",(function(){return A})),r.d(e,"p",(function(){return J})),r.d(e,"gb",(function(){return U})),r.d(e,"W",(function(){return W})),r.d(e,"V",(function(){return Y})),r.d(e,"D",(function(){return X})),r.d(e,"N",(function(){return F})),r.d(e,"O",(function(){return H})),r.d(e,"w",(function(){return q})),r.d(e,"g",(function(){return K})),r.d(e,"X",(function(){return Q})),r.d(e,"A",(function(){return Z})),r.d(e,"B",(function(){return tt})),r.d(e,"T",(function(){return et})),r.d(e,"Q",(function(){return rt})),r.d(e,"r",(function(){return nt})),r.d(e,"H",(function(){return ut})),r.d(e,"kb",(function(){return ot})),r.d(e,"J",(function(){return at})),r.d(e,"K",(function(){return st})),r.d(e,"t",(function(){return it})),r.d(e,"mb",(function(){return ct})),r.d(e,"db",(function(){return dt})),r.d(e,"eb",(function(){return lt})),r.d(e,"P",(function(){return ft})),r.d(e,"i",(function(){return pt})),r.d(e,"nb",(function(){return ht})),r.d(e,"L",(function(){return mt})),r.d(e,"lb",(function(){return bt})),r.d(e,"q",(function(){return gt})),r.d(e,"j",(function(){return Ct})),r.d(e,"cb",(function(){return Ot})),r.d(e,"y",(function(){return jt})),r.d(e,"tb",(function(){return vt})),r.d(e,"R",(function(){return St})),r.d(e,"h",(function(){return Nt}));var n=r("b775");function u(t){return Object(n["a"])({url:"/user/Cluster/clusterList",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/user/Cluster/getEffectComp",method:"post",data:t})}function a(t){return Object(n["a"])({url:"/user/Cluster/getExperience",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/user/Cluster/createCluster",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/user/Cluster/delCluster",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/user/Cluster/backUpCluster",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/user/Cluster/getBackUpList",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/user/Cluster/ifBackUp",method:"post",data:{id:t}})}function f(t){return Object(n["a"])({url:"/user/Cluster/restoreCluster",method:"post",data:t})}function p(){return Object(n["a"])({url:"/user/Cluster/getAllMachine",method:"get",params:""})}function h(t){return Object(n["a"])({url:"/user/Cluster/getShards",method:"post",data:{id:t}})}function m(t){return Object(n["a"])({url:"/user/Cluster/addShards",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/user/Cluster/addComps",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/user/Cluster/addNodes",method:"post",data:t})}function C(t){return Object(n["a"])({url:"/user/Cluster/getStatus",method:"post",data:t})}function O(t){return Object(n["a"])({url:"/user/Cluster/getClusterNodesList",method:"post",data:t})}function j(t){return Object(n["a"])({url:"/user/Cluster/delShard",method:"post",data:t})}function v(t){return Object(n["a"])({url:"/user/Cluster/delComp",method:"post",data:t})}function S(t){return Object(n["a"])({url:"/user/Cluster/delSnode",method:"post",data:t})}function N(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function x(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function w(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function M(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function k(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function y(t){return Object(n["a"])({url:"/user/Cluster/getEffectCluster",method:"post",data:t})}function P(t){return Object(n["a"])({url:"/user/Cluster/updateAssign",method:"post",data:t})}function L(t){return Object(n["a"])({url:"/user/Cluster/getNode",method:"post",data:t})}function B(t){return Object(n["a"])({url:"/user/Cluster/getStandbyNode",method:"post",data:t})}function T(t){return Object(n["a"])({url:"/user/Cluster/getSwitcheOverList",method:"get",params:t})}function I(t){return Object(n["a"])({url:"/user/Cluster/getTaskList",method:"get",params:t})}function D(t){return Object(n["a"])({url:"/user/Cluster/getShardPrimary",method:"post",data:t})}function $(){return Object(n["a"])({url:"/user/Cluster/getStroMachine",method:"get",params:""})}function R(){return Object(n["a"])({url:"/user/Cluster/getCompMachine",method:"get",params:""})}function E(t){return Object(n["a"])({url:"/user/Cluster/getBackUpStorage",method:"post",data:t})}function G(t){return Object(n["a"])({url:"/user/Cluster/switchShard",method:"post",data:t})}function V(t){return Object(n["a"])({url:"/user/Cluster/SetCpuCgroup",method:"post",data:t})}function z(t){return Object(n["a"])({url:"/user/Cluster/addStorage",method:"post",data:t})}function A(t){return Object(n["a"])({url:"/user/Cluster/updateStorage",method:"post",data:t})}function J(t){return Object(n["a"])({url:"/user/Cluster/delStorage",method:"post",data:t})}function U(t){return Object(n["a"])({url:"/user/Cluster/rebuildNode",method:"post",data:t})}function W(t){return Object(n["a"])({url:"/user/Cluster/getShardsJobLog",method:"post",data:t})}function Y(t){return Object(n["a"])({url:"/user/Cluster/getShardsCount",method:"get",params:t})}function X(t){return Object(n["a"])({url:"/user/Cluster/getCompsCount",method:"get",params:t})}function F(t){return Object(n["a"])({url:"/user/Cluster/getNodesCount",method:"get",params:t})}function H(t){return Object(n["a"])({url:"/user/Cluster/getOldCluster",method:"get",params:t})}function q(){return Object(n["a"])({url:"/user/Cluster/getBackupStorageList",method:"get",params:""})}function K(t){return Object(n["a"])({url:"/user/Cluster/clusterListError",method:"get",params:t})}function Q(t){return Object(n["a"])({url:"/user/Cluster/getShardsName",method:"get",params:t})}function Z(t){return Object(n["a"])({url:"/user/Cluster/getCompDBName",method:"get",params:t})}function tt(t){return Object(n["a"])({url:"/user/Cluster/getCompDBTable",method:"get",params:t})}function et(t){return Object(n["a"])({url:"/user/Cluster/getShardTable",method:"get",params:t})}function rt(t){return Object(n["a"])({url:"/user/Cluster/getOtherShards",method:"get",params:t})}function nt(t){return Object(n["a"])({url:"/user/Cluster/expandCluster",method:"post",data:t})}function ut(t){return Object(n["a"])({url:"/user/Cluster/getExpandTableList",method:"post",data:t})}function ot(t){return Object(n["a"])({url:"/user/Cluster/setMaxDalay",method:"post",data:t})}function at(t){return Object(n["a"])({url:"/user/Cluster/getMaxDalay",method:"post",data:t})}function st(t){return Object(n["a"])({url:"/user/Cluster/getMetaCluster",method:"get",params:t})}function it(t){return Object(n["a"])({url:"/user/Cluster/getBackStorageList",method:"get",params:t})}function ct(t){return Object(n["a"])({url:"/user/Cluster/setVariable",method:"post",data:t})}function dt(t){return Object(n["a"])({url:"/user/Cluster/getVariable",method:"post",data:t})}function lt(t){return Object(n["a"])({url:"/user/Cluster/getWorkMode",method:"post",data:t})}function ft(t){return Object(n["a"])({url:"/user/Cluster/getOneBackUpList",method:"get",params:t})}function pt(t){return Object(n["a"])({url:"/user/Cluster/computeList",method:"get",params:t})}function ht(t){return Object(n["a"])({url:"/user/Cluster/shardList",method:"get",params:t})}function mt(t){return Object(n["a"])({url:"/user/Cluster/getNoSwitchList",method:"post",data:t})}function bt(t){return Object(n["a"])({url:"/user/Cluster/setNoSwitch",method:"post",data:t})}function gt(t){return Object(n["a"])({url:"/user/Cluster/delSwitch",method:"post",data:t})}function Ct(t){return Object(n["a"])({url:"/user/Cluster/controlInstance",method:"post",data:t})}function Ot(t){return Object(n["a"])({url:"/user/Cluster/getThisShardNodes",method:"post",data:t})}function jt(t){return Object(n["a"])({url:"/user/Cluster/getClusterMonitor",method:"get",params:t})}function vt(t){return Object(n["a"])({url:"/user/ClusterSetting/tableRepartition",method:"post",data:t})}function St(t){return Object(n["a"])({url:"/user/ClusterSetting/getPGTableList",method:"get",params:t})}function Nt(t){return Object(n["a"])({url:"/user/ClusterSetting/clusterOptions",method:"get",params:t})}},"9a0c":function(t,e,r){var n=r("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},"9e3a":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{ref:"myPage",staticStyle:{height:"calc(100vh - 150px)"}},[r("SeeksRelationGraph",{ref:"seeksRelationGraph",attrs:{options:t.graphOptions,"on-node-click":t.onNodeClick,"on-line-click":t.onLineClick},scopedSlots:t._u([{key:"node",fn:function(e){var n=e.node;return r("div",{on:{mouseover:function(e){return t.showNodeTips(n,e)},mouseout:function(e){return t.hideNodeTips(n,e)}}},[r("div",[r("i",{class:n.data.icon,style:{color:n.data.color,fontSize:"40px"}}),r("p",{domProps:{textContent:t._s(n.text)}})])])}}])})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowNodeMenuPanel,expression:"isShowNodeMenuPanel"}],staticStyle:{"z-index":"999",padding:"10px","background-color":"#ffffff",border:"#eeeeee solid 1px","box-shadow":"0px 0px 8px #cccccc",position:"absolute"},style:{left:t.nodeMenuPanelPosition.x+"px",top:t.nodeMenuPanelPosition.y+"px"}},[r("div",{staticStyle:{"line-height":"25px","padding-left":"10px",color:"#888888","font-size":"10px"}},[t._v("对"+t._s(t.nodeName)+"进行操作：")]),r("div",{staticClass:"c-node-menu-item",on:{click:function(e){return e.stopPropagation(),t.doAction("主备切换")}}},[t._v("主备切换")])]),r("el-dialog",{attrs:{visible:t.dialogStatusVisible,"custom-class":"single_dal_view",width:"400px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogStatusVisible=e}}},[r("div",{staticClass:"block"},[r("el-timeline",t._l(t.activities,(function(e,n){return r("el-timeline-item",{key:n,attrs:{icon:e.icon,type:e.type,color:e.color,size:e.size,timestamp:e.timestamp}},[t._v(" "+t._s(e.content)+" ")])})),1)],1)])],1)},u=[],o=r("0491"),a=r.n(o),s=r("b775");function i(){return Object(s["a"])({url:"/user/ClusterMgr/getClusterMgrList",method:"get",params:""})}function c(t){return Object(s["a"])({url:"/user/ClusterMgr/raftClusterMgr",method:"post",data:t})}var d=r("578a"),l=r("ed08"),f=r("82b0"),p={name:"ClusterMgr",components:{SeeksRelationGraph:a.a},data:function(){return{compnode:r("7590"),comps:r("7590"),isShowNodeTipsPanel:!1,nodeMenuPanelPosition:{x:0,y:0},shardName:!1,currentCase:"横向树状图谱",isShowCodePanel:!1,graphOptions:{debug:!0,backgrounImageNoRepeat:!0,layouts:[{label:"树",layoutName:"tree",layoutClassName:"seeks-layout-center",defaultNodeShape:0,defaultLineShape:1,from:"left",min_per_width:"200",max_per_width:"400",min_per_height:"200",max_per_height:"200",levelDistance:""}],defaultLineMarker:{markerWidth:12,markerHeight:12,refX:6,refY:6,data:"M2,2 L10,6 L2,10 L6,6 L2,2"},defaultNodeShape:1,defaultLineShape:4,defaultJunctionPoint:"lr",defaultNodeBorderWidth:0,defaultLineColor:"rgba(149, 195, 243, 1)",defaultNodeColor:"rgba(176, 210, 237, 1)",defaultNodeFontColor:"rgba(0, 0, 0, 1)",defaultNodeBorderColor:"rgba(255, 255, 255, 1)"},list:[],isShowNodeMenuPanel:!1,nodeName:"",dialogStatusVisible:!1,timer:null,activities:[]}},created:function(){},mounted:function(){this.showSeeksGraph()},methods:{showNodeTips:function(t,e){this.currentNode=t;this.$refs.myPage.getBoundingClientRect()},hideNodeTips:function(t,e){this.isShowNodeTipsPanel=!1},showNodeMenus:function(t,e){this.currentNode=t;var r=this.$refs.myPage.getBoundingClientRect();this.isShowNodeMenuPanel=!0,this.nodeMenuPanelPosition.x=e.clientX-r.x,this.nodeMenuPanelPosition.y=e.clientY-r.y},showSeeksGraph:function(t){var e=this;i().then((function(t){for(var r=t.list,n=0;n<r.nodes.length;n++){var u=r.nodes[n];"cluster_mgr"==u.id&&e.$set(u,"data",{icon:"iconfont  icon-computer",color:"#533ade"}),-1!=u.id.indexOf("cnode")&&(e.$set(u.data,"icon","iconfont icon-snode"),e.$set(u.data,"color","#e98f36"),"source"==u.data.member_state?e.$set(u.data,"color","#ff0000"):"replica"==u.data.member_state?e.$set(u.data,"color","#e98f36"):e.$set(u.data,"color","#acacac"))}e.list=r;var o=e.list;e.$refs.seeksRelationGraph.setJsonData(o,(function(t){})),setTimeout((function(){e.listLoading=!1}),500)}))},onNodeClick:function(t,e){this.currentNode=t;var r=this.$refs.myPage.getBoundingClientRect();"replica"==this.currentNode.data.member_state?(this.isShowNodeMenuPanel=!0,this.nodeName=this.currentNode.text,this.nodeMenuPanelPosition.x=e.clientX-r.x,this.nodeMenuPanelPosition.y=e.clientY-r.y):this.isShowNodeMenuPanel=!1},onLineClick:function(t,e){console.log("onLineClick:",t)},doAction:function(t){var e=this;if("主备切换"==t){var r={};r.user_name=sessionStorage.getItem("login_username"),r.job_id="",r.version=d["u"][0].ver,r.job_type="raft_mission",r.timestamp=d["s"][0].time+"";var n={task_type:"transfer_leader"};n.target_leader=this.currentNode.data.ip+":"+this.currentNode.data.port,r.paras=n,c(r).then((function(t){var r=t;if("accept"==r.status){e.isShowNodeMenuPanel=!1,e.dialogStatusVisible=!0,e.activities=[];var n={content:"正在进行主备切换",timestamp:Object(l["d"])(),size:"large",type:"primary",icon:"el-icon-more"};e.activities.push(n);var u=0;e.timer=null,e.timer=setInterval((function(){e.getStatus(e.timer,r.job_id,u++)}),1e3)}}))}},getStatus:function(t,e,r){var n=this;setTimeout((function(){var u={job_type:"get_status"};u.version=d["u"][0].ver,u.job_id=e,u.timestamp=d["s"][0].time+"",u.paras={},Object(f["G"])(u).then((function(e){if("done"==e.status||"failed"==e.status)if(clearInterval(t),"done"==e.status){var r={content:e.error_info,timestamp:Object(l["d"])(),color:"#0bbd87",icon:"el-icon-circle-check"};n.activities.push(r),n.getList(),n.dialogStatusVisible=!1}else{var u={content:e.error_info,timestamp:Object(l["d"])(),color:"red",icon:"el-icon-circle-close"};n.activities.push(u)}else{var o={content:e.error_info,timestamp:Object(l["d"])(),color:"#0bbd87"};n.activities.push(o)}})),r>=86400&&clearInterval(t)}),0)}}},h=p,m=(r("f74d"),r("2877")),b=Object(m["a"])(h,n,u,!1,null,null,null);e["default"]=b.exports},ed08:function(t,e,r){"use strict";r.d(e,"g",(function(){return u})),r.d(e,"f",(function(){return o})),r.d(e,"b",(function(){return a})),r.d(e,"d",(function(){return s})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return c})),r.d(e,"e",(function(){return d}));r("53ca"),r("ac1f"),r("00b4"),r("5319"),r("4d63"),r("2c3e"),r("25f0"),r("d3b7"),r("4d90"),r("159b");var n=r("5c96");function u(t,e){return Object(n["Message"])({message:t,type:e,duration:2e3})}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"确定执行此操作吗？",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";return n["MessageBox"].confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:e,center:!0})}function a(t){var e=t.split("T");return e[0]+" "+e[1]}function s(){var t=new Date,e="-",r=":",n=t.getFullYear(),u=t.getMonth()+1,o=t.getDate(),a=t.getHours(),s=t.getMinutes(),i=t.getSeconds(),c=["星期一","星期二","星期三","星期四","星期五","星期六","星期天"];c[t.getDay()];u>=1&&u<=9&&(u="0"+u),o>=0&&o<=9&&(o="0"+o),a>=0&&a<=9&&(a="0"+a),s>=0&&s<=9&&(s="0"+s),i>=0&&i<=9&&(i="0"+i);var d=n+e+u+e+o+" "+a+r+s+r+i;return d}function i(t){var e=t.split("-"),r=e[0],n=e[1],u=e[2],o=new Date(r,n,0);o=o.getDate();var a=r,s=parseInt(n)+1;13==s&&(a=parseInt(a)+1,s=1);var i=u,c=new Date(a,s,0);c=c.getDate(),i>c&&(i=c),s<10&&(s="0"+s);var d=a+"-"+s+"-"+i;return d}function c(){for(var t="",e=4,r=new Array(0,1,2,3,4,5,6,7,8,9),n=0;n<e;n++){var u=Math.floor(9*Math.random());t+=r[u]}return t}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"确定执行此操作吗？",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";return n["MessageBox"].prompt(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入code",inputPattern:/^[0-9]\d*$/,inputErrorMessage:"code格式不正确",type:e})}},f74d:function(t,e,r){"use strict";r("7abb")}}]);